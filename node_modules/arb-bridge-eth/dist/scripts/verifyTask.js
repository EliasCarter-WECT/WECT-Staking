"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const config_1 = require("hardhat/config");
function setupVerifyTask() {
    config_1.task('verify-contracts', 'Verifies arbitrum deployment on etherscan', async (_taskArgs, bre) => {
        const { deployments } = bre;
        await deployments.getOrNull('ArbFactory');
        const contracts = await deployments.all();
        console.log('Verifying contracts on etherscan');
        for (const contractName in contracts) {
            const contractInfo = contracts[contractName];
            console.log(`Verifying ${contractName}`);
            try {
                await bre.run('verify', {
                    address: contractInfo.address,
                    constructorArguments: contractInfo.args,
                });
                console.log(`Verified ${contractName}`);
            }
            catch (e) {
                console.log('Failed to verify', e);
            }
        }
    });
}
exports.default = setupVerifyTask;
